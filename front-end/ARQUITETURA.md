# Arquitetura de Cadastro - Diagrama Visual

## ğŸ“¦ Estrutura de Pastas

```
front-end/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ app/
â”‚       â”œâ”€â”€ ğŸ“ models/
â”‚       â”‚   â””â”€â”€ usuario.ts                    âœ¨ NOVO
â”‚       â”‚       â”œâ”€â”€ RegistroCadastro
â”‚       â”‚       â”œâ”€â”€ RespostaCadastro
â”‚       â”‚       â””â”€â”€ ErroAPI
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ services/
â”‚       â”‚   â”œâ”€â”€ auth.service.ts              âœ¨ NOVO
â”‚       â”‚   â”œâ”€â”€ auth.service.spec.ts         âœ¨ NOVO (Testes)
â”‚       â”‚   â”œâ”€â”€ validacao.service.ts         âœ¨ NOVO
â”‚       â”‚   â””â”€â”€ validacao.service.spec.ts    âœ¨ NOVO (Testes)
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ interceptors/
â”‚       â”‚   â””â”€â”€ http-config.interceptor.ts   âœ¨ NOVO
â”‚       â”‚       â”œâ”€â”€ Adiciona headers
â”‚       â”‚       â”œâ”€â”€ Injeta token
â”‚       â”‚       â””â”€â”€ Trata erros globais
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ config/
â”‚       â”‚   â””â”€â”€ api.config.ts                âœ¨ NOVO
â”‚       â”‚       â”œâ”€â”€ URL base
â”‚       â”‚       â”œâ”€â”€ Endpoints
â”‚       â”‚       â””â”€â”€ ConfiguraÃ§Ãµes
â”‚       â”‚
â”‚       â”œâ”€â”€ ğŸ“ cadastrar/
â”‚       â”‚   â”œâ”€â”€ cadastrar.component.ts       ğŸ”„ ATUALIZADO
â”‚       â”‚   â”œâ”€â”€ cadastrar.component.html     ğŸ”„ ATUALIZADO
â”‚       â”‚   â””â”€â”€ cadastrar.component.css      ğŸ”„ ATUALIZADO
â”‚       â”‚
â”‚       â”œâ”€â”€ app.config.ts                    ğŸ”„ ATUALIZADO
â”‚       â””â”€â”€ app.routes.ts
â”‚
â”œâ”€â”€ ğŸ“„ DOCUMENTACAO_CADASTRO.md              âœ¨ NOVO
â”œâ”€â”€ ğŸ“„ GUIA_INTEGRACAO_BACKEND.md            âœ¨ NOVO
â”œâ”€â”€ ğŸ“„ README_CADASTRO.md                    âœ¨ NOVO
â”œâ”€â”€ ğŸ“„ CHECKLIST.md                          âœ¨ NOVO
â”œâ”€â”€ ğŸ“„ EXEMPLOS_PAYLOADS.md                  âœ¨ NOVO
â”œâ”€â”€ ğŸ“„ ARQUITETURA.md                        âœ¨ NOVO (este arquivo)
â””â”€â”€ package.json
```

## ğŸ”„ Fluxo de Dados - Diagrama Detalhado

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USUÃRIO INTERAGE                             â”‚
â”‚         (Preenche formulÃ¡rio na tela de cadastro)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              COMPONENTE: CadastrarComponent                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ - FormGroup (FormulÃ¡rio Reativo)                          â”‚  â”‚
â”‚  â”‚ - @Input() values â†’ [formControl]                         â”‚  â”‚
â”‚  â”‚ - Listeners em tempo real                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              VALIDAÃ‡ÃƒO EM TEMPO REAL                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ValidacaoService.validar[Campo]()                         â”‚  â”‚
â”‚  â”‚ â”œâ”€ validarEmail()      â†’ regex + formato                 â”‚  â”‚
â”‚  â”‚ â”œâ”€ validarNome()       â†’ length + caracteres             â”‚  â”‚
â”‚  â”‚ â”œâ”€ validarSenha()      â†’ force + requisitos              â”‚  â”‚
â”‚  â”‚ â””â”€ validarConfirmacao()â†’ igualdade                       â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚ Retorna: ResultadoValidacao                              â”‚  â”‚
â”‚  â”‚ â”œâ”€ valido: boolean                                       â”‚  â”‚
â”‚  â”‚ â””â”€ erro?: string                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                  UsuÃ¡rio clica em ENVIAR
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           VALIDAÃ‡ÃƒO FINAL DO FORMULÃRIO                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ FormBuilder.group({                                       â”‚  â”‚
â”‚  â”‚   nome:       [required, minLength(3)]                    â”‚  â”‚
â”‚  â”‚   email:      [required, email]                           â”‚  â”‚
â”‚  â”‚   senha:      [required, minLength(6)]                    â”‚  â”‚
â”‚  â”‚   confirmarSenha: [required]                              â”‚  â”‚
â”‚  â”‚   anoEscolar: [required, min(1), max(3)]                  â”‚  â”‚
â”‚  â”‚ }, { validators: senhasConferemValidator })              â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚ Se invÃ¡lido â†’ Mostrar erros e PARAR                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    ValidaÃ§Ã£o OK
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         PREPARAR DADOS (RegistroCadastro)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ {                                                          â”‚  â”‚
â”‚  â”‚   nome: string (trimmed)                                  â”‚  â”‚
â”‚  â”‚   email: string (lowercase)                               â”‚  â”‚
â”‚  â”‚   senha: string                                           â”‚  â”‚
â”‚  â”‚   anoEscolar: number                                      â”‚  â”‚
â”‚  â”‚ }                                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AuthService.cadastrarUsuario()                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ POST /api/usuarios/cadastro                               â”‚  â”‚
â”‚  â”‚ â”œâ”€ body: RegistroCadastro                                â”‚  â”‚
â”‚  â”‚ â”œâ”€ headers: Content-Type, Authorization                 â”‚  â”‚
â”‚  â”‚ â””â”€ timeout: 30s                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          HttpConfigInterceptor (Middleware)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ REQUEST:                                                  â”‚  â”‚
â”‚  â”‚ â”œâ”€ Adiciona Content-Type: application/json               â”‚  â”‚
â”‚  â”‚ â”œâ”€ Injeta Authorization: Bearer {token}                  â”‚  â”‚
â”‚  â”‚ â””â”€ Passa para next.handle()                              â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚ RESPONSE/ERROR:                                          â”‚  â”‚
â”‚  â”‚ â”œâ”€ Captura HttpErrorResponse                             â”‚  â”‚
â”‚  â”‚ â”œâ”€ Log no console                                        â”‚  â”‚
â”‚  â”‚ â”œâ”€ Trata 401 (Unauthorized)                              â”‚  â”‚
â”‚  â”‚ â”œâ”€ Trata 403 (Forbidden)                                 â”‚  â”‚
â”‚  â”‚ â””â”€ Retorna throwError()                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    HTTP REQUEST
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                      â”‚
        â–¼ (Network Request)            â–¼ (Network Error)
        
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACK-END SERVER     â”‚        â”‚  ERRO DE REDE/TIMEOUTâ”‚
â”‚                      â”‚        â”‚                      â”‚
â”‚  POST /api/usuarios/ â”‚        â”‚  catchError()        â”‚
â”‚  cadastro            â”‚        â”‚  â”œâ”€ ErroAPI         â”‚
â”‚  â”œâ”€ Valida dados    â”‚        â”‚  â”œâ”€ Log             â”‚
â”‚  â”œâ”€ Hash senha      â”‚        â”‚  â””â”€ throwError()    â”‚
â”‚  â”œâ”€ Salva BD        â”‚        â”‚                      â”‚
â”‚  â””â”€ Responde JSON   â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
        â”‚                              â”‚
        â”‚ Response 200 OK              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
        â”‚ {sucesso: true, dados}              â”‚      â”‚
        â”‚                                     â–¼      â–¼
        â”‚                                  next()  error()
        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       COMPONENTE RECEBE RespostaCadastro                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ subscribe({                                               â”‚  â”‚
â”‚  â”‚   next: (resposta) => {                                  â”‚  â”‚
â”‚  â”‚     if (resposta.sucesso) {                              â”‚  â”‚
â”‚  â”‚       âœ… Mostrar mensagem de sucesso                     â”‚  â”‚
â”‚  â”‚       âœ… Limpar formulÃ¡rio                               â”‚  â”‚
â”‚  â”‚       âœ… Redirecionar para /entrar (apÃ³s 2s)             â”‚  â”‚
â”‚  â”‚     }                                                    â”‚  â”‚
â”‚  â”‚   },                                                     â”‚  â”‚
â”‚  â”‚   error: (erro) => {                                    â”‚  â”‚
â”‚  â”‚     âŒ Mostrar mensagem de erro                          â”‚  â”‚
â”‚  â”‚     âŒ Destacar campo com problema                       â”‚  â”‚
â”‚  â”‚     âŒ Log no console                                    â”‚  â”‚
â”‚  â”‚   }                                                      â”‚  â”‚
â”‚  â”‚ })                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                      â”‚
        â–¼ (Sucesso)                     â–¼ (Erro)
        
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… SUCESSO          â”‚        â”‚  âŒ ERRO             â”‚
â”‚                      â”‚        â”‚                      â”‚
â”‚  Alerta verde        â”‚        â”‚  Alerta vermelho     â”‚
â”‚  "Cadastro..."       â”‚        â”‚  "Email jÃ¡..."       â”‚
â”‚                      â”‚        â”‚                      â”‚
â”‚  Limpa form          â”‚        â”‚  Desativa button     â”‚
â”‚  (reset)             â”‚        â”‚  Display erros       â”‚
â”‚                      â”‚        â”‚                      â”‚
â”‚  Aguarda 2s          â”‚        â”‚  Aguarda usuÃ¡rio     â”‚
â”‚  â”‚                   â”‚        â”‚  corrigir            â”‚
â”‚  â””â”€â”€> Router.        â”‚        â”‚                      â”‚
â”‚       navigate()      â”‚        â”‚  Volta ao form       â”‚
â”‚       â†“              â”‚        â”‚                      â”‚
â”‚    /entrar           â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§© Componentes e Responsabilidades

### 1. Models (`usuario.ts`)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RegistroCadastro    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - nome: string      â”‚
â”‚ - email: string     â”‚
â”‚ - senha: string     â”‚
â”‚ - anoEscolar: num   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“ Enviado para
    POST /api/usuarios/cadastro
        â†“ Recebe
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RespostaCadastro     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - sucesso: boolean   â”‚
â”‚ - mensagem: string   â”‚
â”‚ - dados?: {          â”‚
â”‚   - id: string       â”‚
â”‚   - nome: string     â”‚
â”‚   - email: string    â”‚
â”‚   - anoEscolar: num  â”‚
â”‚   - dataCriacao      â”‚
â”‚ }                    â”‚
â”‚ - erro?: string      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Services

#### AuthService
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    AuthService               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + cadastrarUsuario()          â”‚
â”‚   â””â”€ (dados: Registro)        â”‚
â”‚      â””â”€ Observable<Resposta>  â”‚
â”‚                               â”‚
â”‚ - tratarErro()               â”‚
â”‚   â”œâ”€ ErrorEvent (cliente)    â”‚
â”‚   â””â”€ HttpErrorResponse (srv) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“ Usa
    HttpClient (POST)
        â†“ + Interceptor
```

#### ValidacaoService
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ValidacaoService             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + validarEmail()             â”‚
â”‚ + validarNome()              â”‚
â”‚ + validarSenha()             â”‚
â”‚ + validarConfirmacao()       â”‚
â”‚ + validarAnoEscolar()        â”‚
â”‚                               â”‚
â”‚ Cada um retorna:             â”‚
â”‚ ResultadoValidacao {         â”‚
â”‚   valido: boolean            â”‚
â”‚   erro?: string              â”‚
â”‚ }                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Interceptor
```
HttpRequest
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HttpConfigInterceptor           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Adiciona Headers             â”‚
â”‚    Content-Type: application    â”‚
â”‚ 2. Injeta Token (localStorage)  â”‚
â”‚    Authorization: Bearer ...    â”‚
â”‚ 3. Passa para Handler           â”‚
â”‚    next.handle(request)         â”‚
â”‚ 4. Trata Resposta/Erro          â”‚
â”‚    - 401: Unauthorized          â”‚
â”‚    - 403: Forbidden             â”‚
â”‚    - 5xx: Server Error          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
HttpResponse ou Error
```

### 4. Componente
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CadastrarComponent             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Propriedades:                  â”‚
â”‚ - formularioCadastro:Form      â”‚
â”‚ - enviando: boolean            â”‚
â”‚ - mensagemSucesso: string      â”‚
â”‚ - mensagemErro: string         â”‚
â”‚ - errosValidacao: {}           â”‚
â”‚                                 â”‚
â”‚ MÃ©todos:                       â”‚
â”‚ - enviarFormulario()           â”‚
â”‚ - enviarCadastro()             â”‚
â”‚ - validarCamposFormulario()    â”‚
â”‚ - obterErroValidacao()         â”‚
â”‚ - temErroValidacao()           â”‚
â”‚ - ngOnInit(), ngOnDestroy()    â”‚
â”‚                                 â”‚
â”‚ InjeÃ§Ãµes:                      â”‚
â”‚ - FormBuilder                  â”‚
â”‚ - AuthService                  â”‚
â”‚ - ValidacaoService             â”‚
â”‚ - Router                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” SeguranÃ§a - Camadas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLIENTE (Front-end)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1ï¸âƒ£ ValidaÃ§Ã£o Client-side           â”‚
â”‚    â”œâ”€ Email format                 â”‚
â”‚    â”œâ”€ Senha strength               â”‚
â”‚    â”œâ”€ Nome vÃ¡lido                  â”‚
â”‚    â””â”€ FormulÃ¡rio completo          â”‚
â”‚                                     â”‚
â”‚ 2ï¸âƒ£ Estilos de feedback             â”‚
â”‚    â”œâ”€ Campos com erro              â”‚
â”‚    â”œâ”€ Mensagens inline             â”‚
â”‚    â””â”€ Estado de carregamento       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“ HTTPS
             
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SERVIDOR (Back-end) âš ï¸ CRÃTICO     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1ï¸âƒ£ ValidaÃ§Ã£o Server-side (SEMPRE)  â”‚
â”‚    â”œâ”€ Email vÃ¡lido + Ãºnico         â”‚
â”‚    â”œâ”€ Senha forte                  â”‚
â”‚    â”œâ”€ Nome vÃ¡lido                  â”‚
â”‚    â””â”€ Campos obrigatÃ³rios          â”‚
â”‚                                     â”‚
â”‚ 2ï¸âƒ£ Hash de Senha                   â”‚
â”‚    â””â”€ bcrypt ou argon2             â”‚
â”‚                                     â”‚
â”‚ 3ï¸âƒ£ ProteÃ§Ã£o contra:                â”‚
â”‚    â”œâ”€ SQL Injection                â”‚
â”‚    â”œâ”€ XSS                          â”‚
â”‚    â”œâ”€ Rate Limiting                â”‚
â”‚    â”œâ”€ CORS                         â”‚
â”‚    â””â”€ CSRF                         â”‚
â”‚                                     â”‚
â”‚ 4ï¸âƒ£ Logging & Monitoring            â”‚
â”‚    â”œâ”€ Tentativas falhadas          â”‚
â”‚    â”œâ”€ Erros                        â”‚
â”‚    â””â”€ Auditoria                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
             
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BANCO DE DADOS                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Senhas HASHEADAS (nunca texto)  â”‚
â”‚ âœ… Email UNIQUE constraint         â”‚
â”‚ âœ… Backup automÃ¡tico               â”‚
â”‚ âœ… Criptografia at rest            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Tabela de Responsabilidades

| Camada | Componente | Responsabilidade |
|--------|-----------|------------------|
| **UI** | Template HTML | Exibir formulÃ¡rio e mensagens |
| **UI** | Estilos CSS | Visual feedback |
| **LÃ³gica** | Componente | Coordenar fluxo |
| **ValidaÃ§Ã£o** | ValidacaoService | Validar campos |
| **API** | AuthService | Comunicar com servidor |
| **HTTP** | HttpInterceptor | Headers e erros globais |
| **Dados** | Models | Tipagem TypeScript |
| **Config** | api.config | ConfiguraÃ§Ãµes |

---

**VersÃ£o:** 1.0  
**Data:** 1Âº de dezembro de 2025  
**Status:** Completo e testado âœ…
